#vm:
sudo apt install gnome-tweaks
gnome-tweaks

#vmware specific:
sudo apt-get install open-vm-tools-desktop
#debug
#Restart VMware Tools
vmware-user
sudo apt install -y --reinstall open-vm-tools-desktop fuse
vmware-user

#might break graphics, 3d acceleration:
sudo add-apt-repository ppa:oibaf/graphics-drivers

wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
sudo apt install ./google-chrome-stable_current_amd64.deb
google-chrome &

#init user as sudo
sudo usermod -aG sudo ahmed
sudo whoami
#or
su -
sudo usermod -aG sudo ahmed
sudo whoami
#or
visudo
#add to the last line:
ahmed ALL=(ALL:ALL) ALL
sudo whoami

mkdir -p ~/.config
mkdir -p ~/projects && cd ~/projects

sudo apt install neovim git -y
#or
wget https://github.com/neovim/neovim/releases/download/v0.10.3/nvim-linux64.tar.gz
wget https://github.com/neovim/neovim/releases/download/v0.10.3/nvim-linux64.tar.gz.sha256sum
sha256sum -c nvim-linux64.tar.gz.sha256sum
tar -xzvf nvim-linux64.tar.gz
sudo mv nvim-linux64 /opt/neovim
rm -rf nvim-linux64.tar.gz.sha256sum nvim-linux64.tar.gz
#or
wget https://github.com/neovim/neovim/releases/download/v0.11.2/nvim-linux-arm64.tar.gz
wget https://github.com/neovim/neovim/releases/download/v0.11.2/nvim-linux-arm64.tar.gz.sha256sum
sha256sum -c nvim-linux-arm64.tar.gz.sha256sum
tar -xzvf nvim-linux-arm64.tar.gz
sudo mv nvim-linux-arm64 /opt/neovim
rm -rf nvim-linux-arm64.tar.gz nvim-linux64.tar.gz.sha256sum

echo $SHELL
sudo apt install zsh -y
sudo apt install curl -y
sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" -y
git clone https://github.com/romkatv/powerlevel10k.git $ZSH_CUSTOM/themes/powerlevel10k
ZSH_THEME="powerlevel10k/powerlevel10k"
chsh -s $(which zsh)
source ~/.zshrc

ln -s ~/projects/config/setup_commands/ ~/setup_commands
ln -s ~/projects/config/bat ~/.config/bat
ln -s ~/projects/config/coolnight.itermcolors ~/.config/coolnight.itermcolors
ln -s ~/projects/config/nvim ~/.config/nvim
ln -s ~/projects/config/thefuck ~/.config/thefuck
ln -s ~/projects/config/tmux/ ~/.config/tmux
ln -s ~/projects/config/tmux/.tmux/ ~/.tmux
ln -s ~/projects/config/home/gitconfig ~/.gitconfig
ln -s ~/projects/config/home/oh-my-zsh ~/.oh-my-zsh
ln -s ~/projects/config/home/fzf-git.sh/ ~/fzf-git.sh
ln -s ~/projects/config/home/p10k.zsh ~/.p10k.zsh
ln -s ~/projects/config/home/screenrc ~/.screenrc
ln -s ~/projects/config/home/viminfo ~/.viminfo
ln -s ~/projects/config/home/vscode ~/.vscode
ln -s ~/projects/config/home/wezterm.lua ~/.wezterm.lua
ln -s ~/projects/config/home/zhistory ~/.zhistory
ln -s ~/projects/config/home/zprofile ~/.zprofile
ln -s ~/projects/config/home/zsh_history ~/.zsh_history
ln -s ~/projects/config/home/zsh_sessions ~/.zsh_sessions
ln -s ~/projects/config/home/zshrc ~/.zshrc

ln -s ~/projects/config/home/zshrc.pre-oh-my-zsh ~/.zshrc.pre-oh-my-zsh
ln -s ~/projects/config/home/local ~/.local
ln -s ~/projects/config/aerospace ~/.config/aerospace
ln -s ~/projects/config/raycast ~/.config/raycast
ln -s ~/projects/config/wireshark ~/.config/wireshark
ln -s ~/projects/config/iterm2 ~/.config/iterm2

#wezterm
curl -fsSL https://apt.fury.io/wez/gpg.key | sudo gpg --yes --dearmor -o /etc/apt/keyrings/wezterm-fury.gpg
echo 'deb [signed-by=/etc/apt/keyrings/wezterm-fury.gpg] https://apt.fury.io/wez/ * *' | sudo tee /etc/apt/sources.list.d/wezterm.list
sudo apt update
sudo apt install wezterm-nightly
#or wget
wget https://github.com/wez/wezterm/releases/download/nightly/wezterm-nightly.deb
sudo dpkg -i wezterm-nightly.deb
sudo apt --fix-broken install

sudo apt install xsel xclip python3 python3-venv npm bat screen eza fzf zoxide zsh-autosuggestions zsh-syntax-highlighting git neovim ripgrep tmux thefuck git-delta apt-transport-https ca-certificates gnupg -y

#fonts
sudo apt install -y fontconfig
wget https://github.com/ryanoasis/nerd-fonts/releases/download/v2.1.0/Meslo.zip
mkdir -p ~/.local/share/fonts
unzip Meslo.zip -d ~/.local/share/fonts
cd ~/.local/share/fonts
rm *Windows*
cd ~
rm Meslo.zip
fc-cache -fv

#If needed
git clone https://github.com/joshskidmore/zsh-fzf-history-search ${ZSH_CUSTOM:=~/.oh-my-zsh/custom}/plugins/zsh-fzf-history-search
git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting
plugins=(git zsh-autosuggestions zsh-syntax-highlighting web-search zsh-fzf-history-search)

#fzf
sudo apt install build-essential cmake gcc -y
cd ~/.local/share/nvim/lazy/telescope-fzf-native.nvim
make
#or
/usr/bin/make
ls build/libfzf.so

#pyenv
sudo apt install -y \
  build-essential \
  libssl-dev \
  zlib1g-dev \
  libbz2-dev \
  libreadline-dev \
  libsqlite3-dev \
  wget \
  curl \
  llvm \
  libncurses5-dev \
  libgdbm-dev \
  libnss3-dev \
  libffi-dev \
  liblzma-dev \
  tk-dev \
  libyaml-dev \
  python3-openssl \
  git
curl https://pyenv.run | bash

#tmux
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
~/.tmux/plugins/tpm/bin/install_plugins
#ctrl+A + Shift+I
#remove all plugings
st
#ctrl+A + Alt+u
#add plugins again
st
#ctrl+A + Shift+I

#Only to setup again
# -- p10k configure

#Only if it isn't already available in config folder
cd ~/.config/bat/themes/
batcat cache --build
#or
bat cache --build
# curl -O https://raw.githubusercontent.com/folke/tokyonight.nvim/main/extras/sublime/tokyonight_night.tmTheme
# curl https://raw.githubusercontent.com/josean-dev/dev-environment-files/main/coolnight.itermcolors --output ~/coolnight.itermcolors

#lazygit
LAZYGIT_VERSION=$(curl -s "https://api.github.com/repos/jesseduffield/lazygit/releases/latest" | \grep -Po '"tag_name": *"v\K[^"]*')
curl -Lo lazygit.tar.gz "https://github.com/jesseduffield/lazygit/releases/download/v${LAZYGIT_VERSION}/lazygit_${LAZYGIT_VERSION}_Linux_x86_64.tar.gz"
tar xf lazygit.tar.gz lazygit
sudo install lazygit -D -t /usr/local/bin/
rm lazygit lazygit.tar.gz
which lazygit

#sudo nvim not working:
sudo visudo
#then append nvim path to end of Defaults path near the top of the file

#OpenTofu
sudo install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://get.opentofu.org/opentofu.gpg | sudo tee /etc/apt/keyrings/opentofu.gpg >/dev/null
curl -fsSL https://packages.opentofu.org/opentofu/tofu/gpgkey | sudo gpg --no-tty --batch --dearmor -o /etc/apt/keyrings/opentofu-repo.gpg >/dev/null
sudo chmod a+r /etc/apt/keyrings/opentofu.gpg /etc/apt/keyrings/opentofu-repo.gpg
echo \
  "deb [signed-by=/etc/apt/keyrings/opentofu.gpg,/etc/apt/keyrings/opentofu-repo.gpg] https://packages.opentofu.org/opentofu/tofu/any/ any main
deb-src [signed-by=/etc/apt/keyrings/opentofu.gpg,/etc/apt/keyrings/opentofu-repo.gpg] https://packages.opentofu.org/opentofu/tofu/any/ any main" | \
  sudo tee /etc/apt/sources.list.d/opentofu.list > /dev/null
sudo chmod a+r /etc/apt/sources.list.d/opentofu.list
sudo apt-get update
sudo apt-get install -y tofu
